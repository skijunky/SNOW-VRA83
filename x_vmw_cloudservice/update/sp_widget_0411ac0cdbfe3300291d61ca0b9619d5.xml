<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function ($rootScope, $scope,$timeout, $location) {
	var c = this;

	$scope.ascFlag = true;
	$scope.$on("getPaginationDataEvent", function (evt, response) {
		if (response.table == c.data.requestTable) {
			c.data.requestArray = response.itemsArray;
		} else {
			c.data.approvalArray = response.itemsArray;
		}
		$scope.totalRecords = response.totalRecords;
	});

	$scope.$on('statusUpdated', function() {
		c.data.action='refresh';
		c.server.update().then(function(){
			c.data.action='';
			$scope.totalRecords=(c.data.tablename=='sc_req_item')?c.data.requestArray.length:c.data.approvalArray.length;
		});
	});




	$scope.filterSearch = function(passedSearch) {
		var passingObj = {};
		var query = '';

		if (passedSearch != '' && c.data.tablename== c.data.requestTable) {
			if(c.data.myFlagBoolean=='true'){
		query=		
					'cat_itemLIKE'+passedSearch+'^request.requested_forDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
					'numberLIKE'+passedSearch+'^request.requested_forDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
					'stateLIKE'+passedSearch+'^request.requested_forDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
					'stageLIKE'+passedSearch+'^request.requested_forDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
					'request.requested_forLIKE'+passedSearch+'^request.requested_forDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
					'requestLIKE'+passedSearch+'^request.requested_forDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
					'sys_created_onLIKE'+passedSearch+'^request.requested_forDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
					'sys_created_byLIKE'+passedSearch+'^request.requested_forDYNAMIC90d1921e5f510100a9ad2572f2b477fe';
				}else{
				query = 
					'cat_itemLIKE' + passedSearch + '^NQ' +
					'numberLIKE' + passedSearch + '^NQ' +
					'stateLIKE' + passedSearch + '^NQ' +
					'stageLIKE' + passedSearch + '^NQ' +
					'request.requested_forLIKE' + passedSearch + '^NQ' +
					'requestLIKE' + passedSearch + '^NQ' +
					'sys_created_onLIKE' + passedSearch + '^NQ' +
					'sys_created_byLIKE' + passedSearch;
			}
		} else if (passedSearch != '') {
			if(c.data.myFlagBoolean=='true')
			{
				query=
					'stateLIKE'+passedSearch+'^approverDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
				'sysapproval.descriptionLIKE'+passedSearch+'^approverDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
				'sysapprovalLIKE'+passedSearch+'^approverDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
				'approverLIKE'+passedSearch+'^approverDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
				'sys_created_byLIKE'+passedSearch+'^approverDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
				'sys_created_onLIKE'+passedSearch+'^approverDYNAMIC90d1921e5f510100a9ad2572f2b477fe^NQ'+
				'sysapproval.short_descriptionLIKE'+passedSearch+'^approverDYNAMIC90d1921e5f510100a9ad2572f2b477fe';
			}
			else{
				query = 
					'stateLIKE' + passedSearch + '^NQ' +
					'sysapproval.descriptionLIKE'+ passedSearch + '^NQ' +
					'sysapprovalLIKE' + passedSearch + '^NQ' +
					'approverLIKE' + passedSearch + '^NQ' +
					'sys_created_byLIKE' + passedSearch + '^NQ' +
					'sys_created_onLIKE' + passedSearch + '^NQ' +
					'sysapproval.short_descriptionLIKE' + passedSearch;
			}
		}
		passingObj={'query':query};
		//console.log(passingObj.qry)
		$scope.$broadcast('setPaginationDataEvent', passingObj)
	}

	$scope.setRequestAction = function (sysId,state) {		
		//$location.search('sys_id', sysId);	
		c.data.ticketConversation='';

		c.data.state=state;
		c.data.action='ticketConversation';
		c.data.obj_sysId=sysId;
		c.server.update().then(function(){
			c.data.obj_sysId='';
			c.data.action='';
			c.data.state='';
			$scope.filterSearch('');
		});		
	}	

	$scope.setOrder = function (passedOrder) {
		var passingObj = {};
		passingObj = {orderBy : passedOrder.name, orderByAsc: passedOrder.ascending};
		$scope.$broadcast('setPaginationDataEvent', passingObj);
	}

	//redirect to the specified url
	$scope.redirect=function(url){
		$location.url(url);
	}
} 
]]></client_script>
        <controller_as>c</controller_as>
        <css>.cas-clr-col-6 &gt; h2 {
  margin-top: 0;
  line-height: 1.475rem;
}
.cas-content-area {
  padding-bottom: 0px;
}

.header-tool-container {
  display: flex;
}
.wdg-btn-link {
  padding: 0 .4rem;
  min-width: 30px;
  fill: #0078b8;
  &amp;:hover  {
    fill: #004d8a;
  }
}
tbody tr {
  position: relative;
}
.wdg-action {
  width: 10px;
  &amp;:hover {
    cursor: pointer;
  }
}
.cas-modal-body{
height:70vh;
}
.cas-disabled {
  fill: #565656;
  cursor: not-allowed;
  opacity: .4;
  background-color: transparent;
  border-color: transparent;
  -webkit-box-shadow: none;
  box-shadow: none;
  &amp;:hover {
    fill: #565656;
  }
}
.wdg-badge-count {
  vertical-align: middle;
}

.wdg-search {
  width: calc(100% - 1px);
}
.cas-table td, .cas-table th {

}
.left {
  text-align: left;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  max-width: 0;
}
.wdg-table-name {
  max-width: 1.2rem;
}
.wdg-table-desc {
  max-width: 2rem;
}
tbody {
  display:block;
  height: calc(100vh - 260px);
  overflow:auto;
}
thead, tfoot, tbody tr {
  display:table;
  width:100%;
  table-layout:fixed;/* even columns width , fix width of table too*/
}

.empty-message-container {
  height: calc(100vh - 157.4px);
  display: flex;
  align-items: center;
  justify-content: center;
  span {
    span {
      display: inline-flex;
      margin: auto;
      position: relative;
      left: 50%;
      transform: translateX(-50%);
    }
  }
}

.pagination-wrapper {
  background-color: #fafafa;
  padding: 0;
  display: flex;
  justify-content: flex-end;
  padding: 5px 25px 3px 0px;
}
.state-icon {
  position: relative;
  top: -1px;
}
.state-content {
  position: relative;
  top: -6px;
}
.cas-dropdown {
  position: absolute;
}
.wdg-dropdown {
  background: transparent;
  border: none;
  display: flex;
  align-items: center;
  padding: 0px;
  margin-bottom: -3px;
  position: relative;
}
.dropdown-menu {
  padding: .5rem 0;
  background: #fff;
  margin-right: 17px;
  border: 1px solid #ccc;
  border-radius: .125rem;
  box-shadow: 0 1px 0.125rem rgba(115,115,115,.25);
}
.cas-dropdown-item {
  a {
    color: #575757;
  }
  padding: .125rem 1rem;
  &amp;:hover {
    background-color: #ededed;
    color: #575757;
    text-decoration: none;
  }
}
.clearSearch{
  position:relative;
  right:15px;
}


.cas-dropdown-item {
  a {
    color: #575757;
  }
  padding: 10px 1rem;
  &amp;:hover {
    cursor: pointer;
    background-color: #ededed;
    color: #575757;
    text-decoration: none;
  }
}</css>
        <data_table>sp_instance_table</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list>table,filter,field_list,maximum_entries,order_by,order_direction,title,color,glyph,sp_page</field_list>
        <has_preview>false</has_preview>
        <id>cas_activitieslist</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>CAS_activitiesList</name>
        <option_schema/>
        <public>false</public>
        <roles>x_vmw_cloudservice.vra_catalog_admin,x_vmw_cloudservice.vra_end_user</roles>
        <script><![CDATA[(function(){

	try {
		CASLogger.debug('Inside CAS_activitiesListApproval Widget:');
		if (!input || input.action=='refresh') {
			var appUtil = new CASAppUtil();
			var daoUtil = new CASDaoUtil();
			var paginationOptionSchema;
			var urlTable = $sp.getParameter('table') || appUtil.configuration.table.requests;
			data.filterText='';
			data.tablename=urlTable;
			data.approvalActionArray = ['Approve', 'Reject', 'Comment'];
			data.requestActionArray = ['Comment'];
			var urlPage = $sp.getParameter('id');
			var urlOrder = $sp.getParameter('order') || ((urlTable == appUtil.configuration.table.approvals)? 10 : 6);
			var urlFilter = $sp.getParameter('filter') || '';
			var urlMyFlag = ($sp.getParameter('myFlag') != '' && $sp.getParameter('myFlag') != null && $sp.getParameter('myFlag')) ?  $sp.getParameter('myFlag') : true + '';
			data.myFlagBoolean=($sp.getParameter('myFlag') != '' && $sp.getParameter('myFlag') != null && $sp.getParameter('myFlag')) ?  $sp.getParameter('myFlag') : true + '';
			var setRequestLegend = function (filter) {
				switch (filter) {
					case 'In Progress':
						return 'Work In Progress';
					case 'Open':
						return 'Open';
					case 'Closed Complete':
						return 'Closed Complete';
					case 'Closed Incomplete':
						return 'Closed Incomplete';
				}
			};
			var setApprovalLegend = function (filter) {
				switch (filter) {
					case 'Awaiting Approval':
						return 'Requested';
					case 'Rejected':
						return 'Rejected';
					case 'Approved':
						return 'Approved';
				}
			};


			//-------------------------Data variable---------------------
			if (urlTable == appUtil.configuration.table.approvals) {
				paginationOptionSchema = {
					legend : setApprovalLegend(urlFilter),
					showMyFilter: urlMyFlag,
					table: appUtil.configuration.table.approvals,
					windowSize: 20,
					query:'',
					method:'fetchPortalApprovalItems'
				};
				data.headerTitle = 'Approvals';
				data.approvalArray = daoUtil.fetchPortalApprovalItems(paginationOptionSchema);
				data.widgetScript = $sp.getWidget('cas_pagination', paginationOptionSchema);
			} else {
				paginationOptionSchema = {
					legend: setRequestLegend(urlFilter),
					showMyFilter: urlMyFlag,
					table: appUtil.configuration.table.requests,
					windowSize: 20,
					query:'',
					method:'fetchPortalRequestItems'
				};

				data.actionArray = ['Approve', 'Reject', 'Comment'];
				data.headerTitle = 'Requests';
				data.requestArray = daoUtil.fetchPortalRequestItems(paginationOptionSchema);
				data.widgetScript = $sp.getWidget('cas_pagination', paginationOptionSchema);
			}

			data.requestTable = appUtil.configuration.table.requests;
			var catalogAdmin = gs.getProperty(appUtil.configuration.properties.vraCatalogAdmin);
			data.showFilter = (gs.getUser().hasRole('admin') || gs.getUser().hasRole(catalogAdmin));
			data.link = {
				list: '/'+gs.getProperty(appUtil.configuration.properties.portalPrefix)+'?id='+appUtil.configuration.page.activitiesList + '&table=' + urlTable + '&order=' + urlOrder + '&filter=' + urlFilter + '&myFlag=' + urlMyFlag,
				card: '/'+gs.getProperty(appUtil.configuration.properties.portalPrefix)+'?id='+appUtil.configuration.page.activitiesCard + '&table=' + urlTable + '&order=' + urlOrder + '&filter=' + urlFilter + '&myFlag=' + urlMyFlag,
				showMyFilterTrue: '/'+gs.getProperty(appUtil.configuration.properties.portalPrefix)+'?id=' + urlPage + '&table=' + urlTable + '&order=' + urlOrder + '&filter=' + urlFilter + '&myFlag=true',
				additionalContent : '&order=' + urlOrder + '&filter=' + urlFilter + '&myFlag=' + urlMyFlag + '&layout=list',
				showMyFilterFalse: '/'+gs.getProperty(appUtil.configuration.properties.portalPrefix)+'?id=' + urlPage + '&table=' + urlTable + '&order=' + urlOrder + '&filter=' + urlFilter + '&myFlag=false',
				badgeLink: '/'+gs.getProperty(appUtil.configuration.properties.portalPrefix)+'?id=' + urlPage + '&table=' + urlTable + '&myFlag=' + urlMyFlag + '&order=' + ((urlTable == appUtil.configuration.table.approvals)? 10 : 6)
			}
			data.myFlag = urlMyFlag;
			data.filter = urlFilter || '';
		}

		if(input && input.action=='ticketConversation'){
			data.obj_sysId=input.obj_sysId;
			var ticketConversationOptions = {
				requestStatus : input.state,
				sys_id:  data.obj_sysId,
				table: $sp.getParameter('table'),
				title: gs.getMessage("Activity Stream"),
				placeholder: gs.getMessage("Type your message here..."),
				placeholderNoEntries: gs.getMessage("Start a conversation..."),
				btnLabel: gs.getMessage("Send"),
				type:'listOptions'
			};
			data.ticketConversation = $sp.getWidget('cas_ticketconversations', ticketConversationOptions);
		
		}
			

	} catch(e) {
		CASLogger.error('Exception caught inside CAS_activitiesListApproval Widget: '+e);
	}
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>Navdeep</sys_created_by>
        <sys_created_on>2019-07-17 10:04:25</sys_created_on>
        <sys_id>0411ac0cdbfe3300291d61ca0b9619d5</sys_id>
        <sys_mod_count>278</sys_mod_count>
        <sys_name>CAS_activitiesList</sys_name>
        <sys_package display_value="VMware vRealize Automation ITSM Application 8.3" source="x_vmw_cloudservice">0d6a0ec1db11bb407c83712ebf96194d</sys_package>
        <sys_policy/>
        <sys_scope display_value="VMware vRealize Automation ITSM Application 8.3">0d6a0ec1db11bb407c83712ebf96194d</sys_scope>
        <sys_update_name>sp_widget_0411ac0cdbfe3300291d61ca0b9619d5</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-01-16 13:41:09</sys_updated_on>
        <template><![CDATA[<div class="cas-content-area">
  <div class="cas-clr-row">
    <div class="cas-clr-col-6">
      <h2>
        <span>{{(c.data.myFlag == 'true') ? 'My ' : 'All '}}{{c.data.headerTitle}}</span>
        <span class="cas-label cas-label-info wdg-badge-count">{{totalRecords}} {{((totalRecords > 0) ? 'Items': 'Item' )}}</span><!--{{(c.data.requestArray) ? c.data.requestArray.length : c.data.approvalArray.length}} {{(c.data.requestArray) ? (c.data.requestArray.length > 1) ? 'Items' : 'Item' : (c.data.approvalArray.length > 1)? 'Items' : 'Item'}}</span>-->
        <span class="cas-label cas-label-light-blue wdg-badge-count" ng-if="c.data.filter != ''">{{c.data.filter}}<a href="{{c.data.link.badgeLink}}"><cas-clr-icon class="wdg-badge-close" shape="close" size="13"></cas-clr-icon></a></span>
      </h2>
    </div>
    <div class="cas-clr-col-6 header-tool-container" style="display:flex">
       <div class="dropdown cas-dropdown" style="position:relative;">
        <button ng-if="c.data.showFilter" class="dropdown-toggle cas-dropdown-toggle cas-btn cas-btn-link" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          View My Activities
          <cas-clr-icon shape="angle" dir="down" color="#0077b7" size="12" role="none"></cas-clr-icon>
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
          <div class="cas-dropdown-item" ng-click="redirect(c.data.link.showMyFilterTrue)">
            View My Activities
          </div>
          <div class="cas-dropdown-item" ng-click="redirect(c.data.link.showMyFilterFalse)">
            View All Activities
          </div>
        </div>
      </div>

      <cas-clr-icon size="16" shape="search"></cas-clr-icon>
      <input type="text" placeholder="Search" 
             class="wdg-search cas-clr-input"
             ng-model="c.data.filterText" 
             ng-model-options="{ debounce: 900 }" 
             ng-change="filterSearch(c.data.filterText)" />
		<span class="clearSearch" ng-show="c.data.filterText!=''" ng-click="filterSearch('');c.data.filterText='';"><i class="fa fa-times" aria-hidden="true"></i></span>
    

      <a class="wdg-btn-link cas-toggle-view cas-disabled" href="{{c.data.link.list}}">
        <cas-clr-icon shape="view-list" size="20" role="none"></cas-clr-icon>
      </a>
      <a class="wdg-btn-link" href="{{c.data.link.card}}">
        <cas-clr-icon shape="view-cards" size="20" role="none"></cas-clr-icon>
      </a>
    </div>
  </div>
  <div class="cas-clr-row" ng-show="c.data.requestArray.length || c.data.approvalArray.length">
    <div class="cas-clr-col-12">
      <table class="cas-table" ng-show="c.data.requestArray">
        <thead>
          <tr>
            <th style="width: 15px !important"></th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'cat_item', ascending : ascFlag});">Name</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'request', ascending: ascFlag})">Request</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'number', ascending: ascFlag})">RITM Number</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'stage', ascending: ascFlag})">Stage</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'state', ascending: ascFlag})">State</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'sys_created_on', ascending: ascFlag})">Requested Date</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'sys_created_by', ascending: ascFlag})">Requested By</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'request.requested_for', ascending: ascFlag})">Requested For</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="list in c.data.requestArray">
            <td class="left" style="width: 15px">
               </td>
            <td class="left wdg-table-name" title="{{list.item}}">
              <a href="{{list.link}}+{{c.data.link.additionalContent}}">{{list.item}}</a>
            </td>
            <td class="left wdg-table-desc" title="{{list.request}}">
              {{list.request}}
            </td>
            <td class="left" title="{{list.number}}">
              {{list.number}}
            </td>
            <td class="left" title="{{list.stage}}">
              <span ng-if="list.stage == 'Waiting for Approval'" class="cas-spinner cas-spinner-inline state-icon"></span>
              <cas-clr-icon ng-if="list.stage == 'closed_incomplete'" shape="info-standard" size="17" color="red" class="state-icon" role="none"></cas-clr-icon>
              <cas-clr-icon ng-if="list.stage == 'Request Cancelled'" shape="close-circle" size="17" color="red" class="state-icon" role="none"></cas-clr-icon>
              <cas-clr-icon ng-if="list.stage == 'Fulfillment' || list.stage == 'Request Approved' || list.stage == 'Completed'  " shape="success-standard" size="17" color="green" class="state-icon" role="none"></cas-clr-icon>
              <cas-clr-icon ng-if="list.stage == 'Assess or Scope Task'" shape="info-standard" size="17" color="orange" class="state-icon" role="none"></cas-clr-icon>
              <span class="state-content">{{list.stage}}</span></td>
            <td class="left" title="{{list.state}}">{{list.state}}</td>
            <td class="left" title="{{list.created}}">{{list.created}}</td>
            <td class="left" title="{{list.created_by}}">{{list.created_by}}</td>
            <td class="left" title="{{list.requested_for}}">{{list.requested_for}}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td class="pagination-wrapper"> <sp-widget widget="c.data.widgetScript"></sp-widget></td>
          </tr>
        </tfoot>
      </table>
      <table class="cas-table" ng-show="c.data.approvalArray">
        <thead>
          <tr>
            <th style="width: 15px !important"></th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'sysapproval.cat_item', ascending : ascFlag});">Name</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'sysapproval', ascending : ascFlag});">Number</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'state', ascending : ascFlag});">State</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'sys_created_on', ascending : ascFlag});">Requested Date</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'sys_created_by', ascending : ascFlag});">Requested By</th>
            <th class="left" ng-click="ascFlag = !ascFlag; setOrder({name: 'approver', ascending : ascFlag});">Approver</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="list in c.data.approvalArray">
            <td class="left wdg-action" style="width: 15px !important">
             <div class="dropdown  cas-dropdown">
                <!--<button class="cas-btn cas-btn-link" type="button" >-->
                <span class="dropdown-toggle wdg-dropdown cas-dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><cas-clr-icon shape="ellipsis-vertical" size="15" color="#989898" role="none"></cas-clr-icon></span>
                <!--</button>-->
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <div class="cas-dropdown-item" 
                       ng-if="list.state!='Requested'"
                       onclick="$('.action-modal, .action-modal-backdrop').show()" 
                       ng-click="setRequestAction(list.sysId,list.state)"
                       ng-repeat="action in c.data.requestActionArray">
                    <a>{{action}}</a>
                  </div>
               <div class="cas-dropdown-item" 
                    ng-if="list.state=='Requested'"
                    onclick="$('.action-modal, .action-modal-backdrop').show()" 
                    ng-click="setRequestAction(list.sysId,list.state)"
                    ng-repeat="action in c.data.approvalActionArray">
                    <a>{{action}}</a>
                  </div>
                 
               </div>
              </div>
             </td>
            
            
         
            
            
            
            
            
            <td class="left wdg-table-name" title="{{list.item}}">
              <a href="{{list.link}}+{{c.data.link.additionalContent}}">{{list.item}}</a>
            </td>

          <td class="left" title="{{list.number}}">{{list.number}}</td>
            <td class="left" title="{{list.state}}">
              <cas-clr-icon ng-if="list.state == 'Requested'" shape="warning-standard" size="17" color="orange" class="state-icon" role="none"></cas-clr-icon>
              <cas-clr-icon ng-if="list.state == 'Rejected' || list.state == 'Cancelled'" shape="close-circle" size="17" color="red" class="state-icon" role="none"></cas-clr-icon>
              <cas-clr-icon ng-if="list.state == 'Approved'" shape="success-standard" size="17" color="green" class="state-icon" role="none"></cas-clr-icon>
              <cas-clr-icon ng-if="list.state == 'No Longer Required'" shape="info-circle" size="17" color="gray" class="state-icon" role="none"></cas-clr-icon>
              <span class="state-content">{{list.state}}</span></td>
            <td class="left" title="{{list.created}}">{{list.created}}</td>
            <td class="left" title="{{list.created_by}}">{{list.created_by}}</td>
            <td class="left" title="{{list.approver}}">{{list.approver}}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td class="pagination-wrapper"> <sp-widget widget="c.data.widgetScript"></sp-widget></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
  <div class="empty-message-container" ng-if="!c.data.requestArray.length && !c.data.approvalArray.length">
    <span><cas-clr-icon shape="sad-face" color="#717171" size="30"></cas-clr-icon>
      <p>No record found</p>
    </span>
  </div>
</div>


<!-----------------modal-------------------------->
<div class="cas-modal action-modal" style="display: none">
  <div class="cas-modal-dialog" role="dialog" aria-hidden="true">
    <div class="cas-modal-content">
      <div class="cas-modal-header">
        <button aria-label="Close" class="cas-close" type="button" onclick="$('.cas-modal, .cas-modal-backdrop').hide()">
          <cas-clr-icon aria-hidden="true" shape="close" color="#565656" size="25" role="none"></cas-clr-icon>
        </button>
        <h3 class="cas-modal-title">Activities</h3>
      </div>
      <div class="cas-modal-body">
        <div ng-if="c.data.ticketConversation">
          <sp-widget widget="data.ticketConversation" />
        </div>
      </div>
     <!-- <div class="cas-modal-footer">
        <button class="cas-btn cas-btn-outline" type="button" onclick="$('.cas-modal, .cas-modal-backdrop').hide()">Cancel</button>
        <button class="as-btn cas-btn-primary" type="button" ng-click="submitAction(c.data.reason)" onclick="$('.cas-modal, .cas-modal-backdrop').hide()">Submit</button>
      </div>-->
    </div>
  </div>
</div>
<div class="cas-modal-backdrop action-modal-backdrop" aria-hidden="true" style="display: none;"></div>
<!-----------------modal ends here----------------->


<script>
  function toggleAction (element) {
    if ($(element).hasClass('cas-open')) {
      $('.wdg-action .cas-dropdown').removeClass('cas-open');
    } else {
      $('.wdg-action .cas-dropdown').removeClass('cas-open');
      $(element).addClass('cas-open');
    }
  }
</script>]]></template>
    </sp_widget>
</record_update>
